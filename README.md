# Malware-scanner-facade
This is just a demo project.
Demo project for a possible PDF malware scanning architecture.
## How to run

1. Start kafka/zookeeper a localstack s3 server and a kafka ui container with
`docker-compose up -d` 
2. Start the facade service with `./gradlew bootRun`
3. Start the iban check service with `cd IbanCheck && ./gradlew bootRun`

## Try it out

To try out use this curl from project root directory (or use shell scripts found in project root)

**Please note: For privacy reasons "Testdaten_Rechnungseinreichung.pdf" is not included here.
Please copy this file to Testdata directory yourself.**

### Bad pdf (contains blacklisted IBAN)

`curl --location --request POST 'http://localhost:8080/scan/pdf'
--form 'file=@Testdata/Testdaten_Rechnungseinreichung.pdf'`

### Good pdf (will pass check)

`curl --location --request POST 'http://localhost:8080/scan/pdf'
--form 'file=@Testdata/lorem-ipsum.pdf'`


### How do I know stuff happened ?
Once the IbanCheck Component is done with the request, it will publish an event in the `checkEventResultTopic`
You could look at it in the Kafka UI via

http://localhost:8081/

Or have a look at the logs of the terminal in which you executed the ./gradlew command.

The file url displayed (in case the check passed) can actually be used to download the PDF again.

## What's left to do ?

Quite a bit actually, please note this is just a POC. But to name a few:

- **testing.** (duh!) sadly not time was left for this. But super important and a bit of a shame it is not present yet.
- **error handling** failing calls against remote services like s3 or kafka are not gracefully handled at the moment.
- **security.** no security at all is used at the moment, not a bummer as it is just for local use atm. Spring security to secure rest endpoints would be a good start.
- **aggregating scan result.** Develop a strategy so that more than one check component processes the file and aggregate all checks to a single result.
- **code redundancy** stuff like dtos or a s3 service are redundant and could be moved to a common package 
- **lots and lots of small fixes** small details as the PDFs file ending are not quite right yet.
- **deployment** the services should be used dockerized and be deployable to remote infrastructure for example a k8 cluster.